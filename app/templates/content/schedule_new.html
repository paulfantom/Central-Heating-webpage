{% extends "base.html" %}
{% block content %}

<div class="hidden-xs hidden-sm">
  <br>
</div>
<div class="navbar-header">
  <button type="button" class="navbar-toggle btn btn-link btn-block"
          data-toggle="collapse" data-target="#heater-navbar-collapse">
    <span class="glyphicon glyphicon-calendar"></span>
    {% trans %}Menu{% endtrans %}
  </button>
</div>

<div class="collapse navbar-collapse" id="heater-navbar-collapse">
  <ul class="nav nav-pills nav-justified" role="tablist">
    {%- for tab in tabs -%}
    <li {%- if loop.index == init_tab %} class="active"{% endif %}>
      <a href="#{{ tab['id'] }}-tab" role="tab" data-toggle="tab">{{ tab['title'] }}</a>
    </li>
    {%- endfor -%}
  </ul>
</div>

<!--<form method="post">-->
<div class="tab-content">
{%- for tab in tabs %}
  {%- if loop.index == init_tab %}
  <div class="tab-pane fade in active" id="{{ tab['id'] }}-tab">
  {%- else %}
  <div class="tab-pane fade" id="{{ tab['id'] }}-tab">
  {%- endif %}
    <div class="container-fluid">
      <div id="{{ tab['id'] }}-rows">
    {%- if tab['table'] is defined %}
      <div class="row">
        <div class="col-xs text-center">
          <h4>{{ tab['table']['title']  }}</h4>
        </div>
      </div>
      <hr>
      <div class="row clearfix">
      {%- for col in tab['table']['col_names'] %}
        {% if loop.index == 3 %}<div class="col-xs-2 col-sm-3 text-center">
        {% else %}<div class="col-xs-3 col-sm-4 text-center">
        {% endif %}
            <h5><b>{{ col }}</b></h5>
        </div>
      {%- endfor %}
      </div>
      {% set hours = ['from','to'] %}
      {% for row in tab['table']['data'] %}
      <div class="row row-schedule clearfix" id="{{ tab['id'] }}-row-{{ loop.index }}">
        {% for i in hours %}
        <div class="col-xs-3 col-sm-4 text-center">
          <input type="text" class="form-control clockpicker text-center btn btn-link" value="{{ row[i][0] }}:{{ '{0:02d}'.format(row[i][1]) }}">
        </div>
        {% endfor %}
        <div class="col-xs-2 col-sm-3 text-center">
          <button class="btn btn-link btn-block" name='temp'>{{ "{0:0.1f}".format(row['temp']) }}</button>
        </div>
        <div class="col-xs-1 text-right">
          <button class="btn btn-danger" onclick="removeRow('#{{ tab['id'] }}-row-{{ loop.index }}')">
            <span class="glyphicon glyphicon-minus"></span>
          </button>
        </div>
      </div> <!-- #{{ tab['id'] }}_row_{{ loop.index }} -->
      {%- endfor %}
      </div>
      <div class="row row-schedule clearfix">
        <div class="col-xs-6 col-sm-8 text-right">
          <h5>
          {%- for i in range(tab['table']['col_names']|length-1) %}
          {{ tab['table']['footer'][i]+" " }}
          {%- endfor %}
          </h5>
        </div> 
        <div class="col-xs-2 col-sm-3 text-center">
          <button class="btn btn-link btn-block" id="change_default">
            {{ "{0:0.1f}".format(tab['table']['footer'][-1]) }}
          </button>
        </div>
        <div class="col-xs-1 text-right">
          <button class="btn btn-success" onclick="addRow('#{{ tab['id'] }}-rows')">
            <span class="glyphicon glyphicon-plus"></span>
          </button>
        </div>
      </div> <!-- .row -->
      {%- if save is defined %}
      <div class="row">
        <div class="col-sm-12 col-md-10 col-md-offset-1">
          <button class="btn btn-primary btn-block" id="save" onclick="new_schedule('csrf_token_akjsdbhvgdjsbhc')">{% trans %}Save{% endtrans %}</button>
        </div>
      </div>
      {%- endif %}
    </div> <!-- .contaner -->
    {% else %}
    <div class="hidden-xs hidden-sm"><br></div>
    <div class="well text-center col-lg-8 col-lg-offset-2" style="padding:10px !important">
      <button class="btn btn-info btn-day" id="day_1" onclick="new_schedule('asdfga')">Poniedziałek</button>
      <button class="btn btn-info btn-day" id="day_2" onclick="new_schedule('asdfga')">Wtorek</button>
      <button class="btn btn-info btn-day" id="day_3" onclick="new_schedule('asdfga')">Środa</button>
      <button class="btn btn-info btn-day" id="day_4" onclick="new_schedule('asdfga')">Czwartek</button>
      <button class="btn btn-info btn-day" id="day_5" onclick="new_schedule('asdfga')">Piątek</button>
      <button class="btn btn-info btn-day" id="day_6" onclick="new_schedule('asdfga')">Sobota</button>
      <button class="btn btn-info btn-day" id="day_7" onclick="new_schedule('asdfga')">Niedziela</button> 
    </div>
    {% endif %}
  </div>
{% endfor %}
</div>
<!--</form>-->

<script type="text/javascript">
$('.clockpicker').clockpicker({
  placement: "bottom",
  autoclose: "true"
});
</script>
{% endblock %}
